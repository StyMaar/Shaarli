<!DOCTYPE html>
<html>
<head>
    <link type="text/css" rel="stylesheet" href="../inc/awesomplete.css" />
    {include="includes"}
</head>
<body>
<div id="pageheader">
    {include="page.header"}
</div>

<div id="linklist">

    {if="isLoggedIn()"}
      {include="linklist.paging"}
    {/if}
	<div id="linkcount" class="nomobile">
    	{if="!empty($linkcount)"}{$linkcount} links{/if}
      {if="!empty($privateLinkcount)"}and {$privateLinkcount} private links{/if}
	</div>

    <div id="plugin_zone_start_linklist" class="plugin_zone">
        {loop="$plugin_start_zone"}
            {$value}
        {/loop}
    </div>

    {if="count($links)==0"}
        <div id="searchcriteria">Nothing found.</div>
    {elseif="!empty($search_term) or !empty($search_tags)"}
        <div id="searchcriteria">
            {$result_count} results
            {if="!empty($search_term)"}
                for <em>{$search_term}</em>
            {/if}
            {if="!empty($search_tags)"}
                {$exploded_tags=explode(' ', $search_tags)}
                tagged
                {loop="$exploded_tags"}
                    <span class="linktag" title="Remove tag">
                        <a href="?removetag={function="urlencode($value)"}">{$value} <span class="remove">x</span></a>
                    </span>
                {/loop}
            {/if}
        </div>
    {/if}
    <ul>
        {loop="$links"}
        <li{if="$value.class"} class="{$value.class}"{/if}>
            <div class="linkcontainer">
                {if="isLoggedIn()"}
                    <div class="linkeditbuttons">
                        <form method="GET" class="buttoneditform">
                            <input type="hidden" name="edit_link" value="{$value.linkdate}">
                            <input type="image" alt="Edit" src="images/edit_icon.png#" title="Edit" class="button_edit">
                        </form><br>
                        <form method="POST" class="buttoneditform">
                            <input type="hidden" name="lf_linkdate" value="{$value.linkdate}">
                            <input type="hidden" name="token" value="{$token}">
                            <input type="hidden" name="delete_link">
                            <input type="image" alt="Delete" src="images/delete_icon.png#" title="Delete"
                                   class="button_delete" onClick="return confirmDeleteLink();">
                        </form>
                    </div>
                {/if}
                <h1 class="linktitle">
                    <a href="{$value.real_url}">{$value.title}</a>
                </h1>
            	<div class="thumbnail">{$value.url|thumbnail}</div>
                <div class="linkfooter">
		            {if="$value.description"}<div class="linkdescription">{$value.description}</div>{/if}
		            {if="!$hide_timestamps || isLoggedIn()"}
		                {$updated=$value.updated_timestamp ? 'Edited: '. strftime('%c', $value.updated_timestamp) : 'Permalink'}
		                <span class="linkdate" title="Permalink">
		                    <a href="?{$value.linkdate|smallHash}">
		                        <span title="{$updated}">
		                            {function="strftime('%c', $value.timestamp)"}
		                            {if="$value.updated_timestamp"}*{/if}
		                        </span>
		                        - permalink
		                    </a> -
		                </span>
		            {else}
		                <span class="linkdate" title="Short link here"><a href="?{$value.shorturl}">permalink</a> - </span>
		            {/if}

		            {loop="$value.link_plugin"}
		                <span>{$value}</span> -
		            {/loop}

		            <a href="{$value.real_url}"><span class="linkurl" title="Short link">{$value.url}</span></a><br>
		            {if="$value.tags"}
		                <div class="linktaglist">
		                {loop="$value.taglist"}<span class="linktag" title="Add tag"><a href="?addtag={$value|urlencode}">{$value}</a></span> {/loop}
		                </div>
		            {/if}
				</div>
            </div>
        </li>
    {/loop}
    </ul>

    <div id="plugin_zone_end_linklist" class="plugin_zone">
        {loop="$plugin_end_zone"}
            {$value}
        {/loop}
    </div>

    {include="linklist.paging"}

</div>

    {include="page.footer"}

<script src="inc/awesomplete.min.js#"></script>
<script src="inc/awesomplete-multiple-tags.js#"></script>
<script>
    awesompleteUniqueTag('#tagfilter_value');
</script>
</body>
</html>
